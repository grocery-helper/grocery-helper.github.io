<!DOCTYPE html>
<html>
<head>
	<title>Grocery Helper</title>

	<!-- SEO -->
	<meta charset="utf-8" http-equiv="content-type" content="text/html">
	<meta name="keywords"  content="grocery, helper, grocery helper, grocery app, Santa Clara University, SCU, Santa Clara">
	<meta name="description" content="Grocery Helper enhances your grocery shopping experience by keeping track of when items will expire so, you don't have to!">

	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="bootstrap-social.css">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

	<!-- Add icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="helpPageStyle.css">

	<!-- JQuery -->
	<script type="text/javascript" src='main.js'></script>


	<!-- FONT AWESOME -->
	<!-- <script src="https://kit.fontawesome.com/504d9a3113.js"></script> -->
</head>

<body>

	<!-- NAVBAR -->
	<!-- expands on small; dark theme; stays on top -->
	<!-- bg-dark navbar-dark -->
	<nav class="navbar navbar-expand-sm  fixed-top">
		<a class="navbar-brand" href="#">Grocery Helper</a>

		<!-- Toggler/collapsibe Button -->
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
			<span class="navbar-toggler-icon"></span>
		</button>

		<!-- links to collapse; justify-content-end aligns to right -->
		<div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">

		<ul class="navbar-nav stroke">
			<li class="navbar-item">
				<a class="nav-link" href="index.html">Home</a>
			</li>
			<li class="navbar-item">
				<a class="nav-link" href="helpPage.html">Help</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="viewLists.html">My Lists</a>
			</li>
			<li class="nav-item">
				<a class="nav-link"href="login.html">Login</a>
			</li>
		</ul>
	</div>
	</nav>


	<div class="container-fluid">
		<img src="logo.png" class="centerSmall">

		<div class="containerSmall">
			<h3>Welcome to Grocery Helper.</h3>
			<p>Making lists with Grocery Helper is easy!</p>
			<p>Press on any help button to learn more about that feature.</p>
		</div>

		<div class="row">
			<!-- grocery list -->
			<div class="column" style="background-color:rgb(211, 236, 232)">
				<h2><center>Your List<br>
					<a href="#" data-toggle="popover" title="Making your lists"
					data-content="This is where you can add items to your list!
					Enter the items you want to add to your grocery list.
					When you purchase your iten, you can check it off your list and it will be saved in your inventory.
					Decide to not buy something? Cross it off your list!">
					<button type="button" class="btn btn-info">Help me make a list!</button></a>

				</center></h2>
				<p>

					<div id="myDIV" class="header">
						<input type="text" id="myInput" placeholder="Enter item...">
						<span onclick="newElement()" class="addBtn">Add Item</span>
					</div>

					<ul id="listUL" >
						<li>eggs <span class="quantity"><input id="numberOfItem" type="number" value="1"> </span> <span class="close">√ó</span></li>
						<li class="checked">bread<span class="quantity"><input id="numberOfItem" type="number" value="1"> </span><span class="close">√ó</span></li>
						<li>apples<span class="quantity"><input id="numberOfItem" type="number" value="1"> </span><span class="close">√ó</span></li>
					</ul>

					<script>
					// Create a "close" button and append it to each list item
					var myNodelist = [document.getElementById("listUL")]; // document.getElementsByTagName("LI");
					var i;
					for (i = 0; i < myNodelist.length; i++) {
						var span = document.createElement("SPAN");
						var txt = document.createTextNode("\u00D7");
						span.className = "close";
						span.appendChild(txt);
						myNodelist[i].appendChild(span);
					}

					// Click on a close button to hide the current list item
					var close = document.getElementsByClassName("close");
					var i;
					for (i = 0; i < close.length; i++) {
						close[i].onclick = function() {
							var div = this.parentElement;
							div.style.display = "none";
						}
					}

					// Add a "checked" symbol when clicking on a list item
					var list = document.querySelector("#listUL");
					list.addEventListener('click', function(ev) {
						if (ev.target.tagName === 'LI') {
							ev.target.classList.toggle('checked');
						}
						// Add to inventory table
						var table = document.getElementById("inventoryList");
						var row = table.insertRow(1);
						var newItem = row.insertCell(0);
					  var expDate = row.insertCell(1);
						var addStar = row.insertCell(2);
						var addTrash = row.insertCell(3);
					  //newItem.innerHTML = ev.target.innerHTML;

						//THIS SECTION CAUSES LAG!!!!
						// var getItem = ev.target.innerHTML.toString();
						// var i = 0;
						// var addItem ="";
						// while (getItem[i] != '<') {
						// 	addItem = addItem.concat(getItem[i]);
						// 	i++;
						// }
						//newItem.innerHTML = addItem;
					  expDate.innerHTML = "  days left";
						addStar.innerHTML = "<input type=\"checkbox\">&nbsp"
						addTrash.innerHTML = "<input type=\"checkbox\" onclick=\"deleteRow(this)\"/>"
					}, false);


					// Create a new list item when clicking on the "Add" button
					function newElement() {
						var li = document.createElement("li");
						var inputValue = document.getElementById("myInput").value;
						var t = document.createTextNode(inputValue);
						//console.log(t);
						//li.appendChild(t);
						// $("#listUL").append('<li>'+inputValue+'<span class="quantity"><input id="numberOfItem" type="number" value="1"> </span><span class="close">√ó</span></li>');
						if (inputValue === '') {
							alert("You must write something!");
						} else {
							//document.getElementById("listUL").appendChild(li);
							$("#listUL").append('<li>'+inputValue+'<span class="quantity"><input id="numberOfItem" type="number" value="1"> </span><span class="close">√ó</span></li>');
						}
						document.getElementById("myInput").value = "";

						// var span = document.createElement("SPAN");
						// var txt = document.createTextNode("\u00D7");
						// span.className = "close";
						// span.appendChild(txt);
						// li.appendChild(span);

						console.log(li);

						for (i = 0; i < close.length; i++) {
							close[i].onclick = function() {
								var div = this.parentElement;
								div.style.display = "none";
							}
						}
					}
					</script>

				</p>
			</div>
			<!-- inventory -->
			<div class="column" style="background-color:rgb(188, 237, 228);">
				<h2><center>Inventory<br>
					<a href="#" data-toggle="popover" title="Your Inventory"
					data-content="This is where you can view items that you currently have.
												Staring items (‚≠ê) adds them to your favorites list.
												When you run out of an item, remove it from your list (üóëÔ∏è).">
					<button type="button" class="btn btn-info">What's in my inventory?</button></a></center></h2>
					<p>Items you already have.</p>

					<table id="inventoryList">
						<tr>
							<th>Item</th>
							<th>Days until expiration</th>
							<th>‚≠ê</th>
							<th>üóëÔ∏è</th>
						</tr>
						<tr>
							<td>bananas</td>
							<td>3 days</td>
							<td><input type="checkbox" class = "use-address"></td>
							<td><input type="checkbox" onclick="deleteRow(this)"/></td>
						</tr>
						<tr>
							<td>cheddar cheese</td>
							<td>21 days</td>
							<td><input type="checkbox" class = "use-address"></td>
							<td><input type="checkbox" onclick="deleteRow(this)"/></td>
						</tr>
					</table>

					<script>
					function deleteRow(btn) {
					  var row = btn.parentNode.parentNode;
					  row.parentNode.removeChild(row);
					}

					$('.use-address').click(function () {
							var id = $(this).closest("tr").find('td:eq(0)').text();
							addToFav(id);
						});

					function addToFav(id){
						// Add to favorites table
						var table = document.getElementById("favoritesList");
						var row = table.insertRow(1);
						var starBullet = row.insertCell(0);
					  var itemName = row.insertCell(1);
						var addTrash = row.insertCell(2);
					  starBullet.innerHTML = "‚≠ê";
					  itemName.innerHTML = id;
						addTrash.innerHTML = "<input type=\"checkbox\" onclick=\"deleteRow(this)\"/>"
						//also add to grocery list
						var ul = document.getElementById("listUL");
						var li = document.createElement("li");
						$("#listUL").append('<li>'+String(id)+'<span class="quantity"><span class="close">√ó</span><input id="numberOfItem" type="number" value="1"></li>');

					}
					</script>

			</div>

			<!-- favorites -->
			<div class="column" style="background-color:rgb(157, 236, 222);">
				<h2><center>Favorites<center>
					<a href="#" data-toggle="popover" title="Your Favorites"
					data-content="These items will always be added to your grcoery list.
					You can add items to your by starring them and remove them at any time.">
					<button type="button" class="btn btn-info">What are your favorites?</button></a></center></h2>
					<p>Your favorte items</p>

					<table id="favoritesList">
						<col width="5">
						<col width="200" style="text-align:left">
						<col width="30" style="text-align:right">
						<tr>
							<th></th>
							<th></th>
							<th>üóëÔ∏è</th>
						</tr>
						<tr>
							<td>‚≠ê</td>
							<td>eggs</td>
							<td><input type="checkbox" onclick="deleteRow(this)"/></td>
						</tr>
							<tr>
								<td>‚≠ê</td>
							<td>apples</td>
							<td><input type="checkbox" onclick="deleteRow(this)"/></td>
						</tr>

						<script>
						function deleteRow(btn) {
						  var row = btn.parentNode.parentNode;
						  row.parentNode.removeChild(row);
						}
						</script>

				</div>

				<script>
				$(document).ready(function(){
					$('[data-toggle="popover"]').popover();
				});
				</script>

			</div>

		</div>

			<!-- <div class="middle"></div> -->


			<!-- FOOTER OR CONTACT-->

</body>
</html>
